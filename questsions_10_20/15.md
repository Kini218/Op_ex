# Основные отношения между классами: зависимость. Программная реализация, примеры отношений зависимости.

### **Зависимость между классами**

**Зависимость** — это отношение между двумя классами, где один класс использует другой для выполнения своих задач. Это слабая связь, которая указывает, что изменения в одном классе могут повлиять на другой, если они связаны через зависимость.

---

### **1. Характеристики зависимости**

- **Одностороннее взаимодействие:** Один класс зависит от другого, но не наоборот.
- **Временная связь:** Объект зависимости используется только во время выполнения метода.
- **Слабая связь:** Зависимость между классами временная и не фиксируется в полях или свойствах.

---

### **2. Программная реализация зависимости**

Зависимость обычно реализуется через:
1. **Передачу объекта в метод.**
2. **Создание объекта локально внутри метода.**
3. **Использование объектов, предоставленных извне (например, через параметры метода).**

#### **Пример: Зависимость через метод**
```csharp
public class Printer
{
    public void Print(string message)
    {
        Console.WriteLine($"Printing: {message}");
    }
}

public class Document
{
    public void PrintDocument(Printer printer)
    {
        printer.Print("This is a document."); // Зависимость
    }
}

// Использование
var printer = new Printer();
var document = new Document();
document.PrintDocument(printer);
```

**Объяснение:**
- Класс `Document` зависит от класса `Printer` для выполнения печати.
- Зависимость временная и существует только в методе `PrintDocument`.

---

### **3. Примеры зависимости**

#### **3.1. Зависимость через передачу параметра**
```csharp
public class Logger
{
    public void Log(string message)
    {
        Console.WriteLine($"Log: {message}");
    }
}

public class Service
{
    public void PerformAction(Logger logger)
    {
        logger.Log("Action performed."); // Зависимость
    }
}

// Использование
var logger = new Logger();
var service = new Service();
service.PerformAction(logger);
```

#### **3.2. Зависимость через локальное создание объекта**
```csharp
public class EmailSender
{
    public void SendEmail(string email)
    {
        Console.WriteLine($"Email sent to: {email}");
    }
}

public class Notification
{
    public void Notify()
    {
        var emailSender = new EmailSender(); // Локальная зависимость
        emailSender.SendEmail("user@example.com");
    }
}

// Использование
var notification = new Notification();
notification.Notify();
```

#### **3.3. Зависимость через интерфейс**
Использование интерфейсов позволяет реализовать зависимость более гибко.

```csharp
public interface IMessageSender
{
    void Send(string message);
}

public class SmsSender : IMessageSender
{
    public void Send(string message)
    {
        Console.WriteLine($"SMS sent: {message}");
    }
}

public class Notification
{
    public void Notify(IMessageSender sender)
    {
        sender.Send("Hello!"); // Зависимость через интерфейс
    }
}

// Использование
var smsSender = new SmsSender();
var notification = new Notification();
notification.Notify(smsSender);
```

**Объяснение:**
- Класс `Notification` зависит от интерфейса `IMessageSender`, а не от конкретной реализации.
- Это обеспечивает слабую связь и улучшает расширяемость.

---

### **4. Примеры зависимостей в реальной жизни**

1. **Магазин и поставщик:** Магазин зависит от поставщика для получения товаров.
2. **Приложение и база данных:** Приложение зависит от службы базы данных для выполнения операций.
3. **Сервис и логирование:** Сервис использует логгер для записи информации.

---

### **5. Отличия зависимости от других отношений**

| **Отношение**   | **Описание**                                                                                 | **Пример**                                       |
|------------------|---------------------------------------------------------------------------------------------|-------------------------------------------------|
| **Зависимость** | Временная связь: объект используется только внутри метода.                                   | Логгер передаётся в метод для записи логов.    |
| **Ассоциация**  | Постоянная связь: объект сохраняется в поле или свойстве.                                    | Университет содержит список факультетов.        |
| **Агрегация**   | Части могут существовать независимо от целого.                                               | Компания имеет сотрудников.                     |
| **Композиция**  | Части существуют только в контексте целого.                                                  | Двигатель существует только в контексте машины. |

---

### **6. Преимущества зависимости**

- **Слабая связь:** Упрощает изменение и тестирование кода.
- **Гибкость:** Легко заменять используемые объекты.
- **Повторное использование:** Компоненты могут использоваться в других местах.

---

### **7. Итог**

**Зависимость** — это базовый тип связи между классами, который используется в большинстве объектов и сценариев. Она помогает создавать гибкие, модульные и легко тестируемые системы, где объекты взаимодействуют временно и без сильной привязки друг к другу.